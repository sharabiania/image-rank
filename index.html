<html>
	<head>
		<style>
			img {cursor: pointer;}
			img:hover {border: 2px solid black;}
		</style>
	</head>
	<body>
		<img id="img-left" width="200" height="100" onclick="leftClick()"/>
		<img id="img-right" width="200" height="100" onclick="rightClick()"/>
		<table id="table">			
		</table>
		<script>
			const TOTAL = 6;
			var imgSet = [];
			var currSet = [];
			var imgLeft = document.getElementById("img-left");
			var imgRight = document.getElementById("img-right");
			var li = 0, ri = 1;

			var img = function(name) {
				this.name = name;
				this.selected = false;
				this.rank = 0;
			}
			img.prototype.src = function() {
				return "images/img_" + this.name + ".jpg";
			}


			function shuffle(a) {
				var j, x, i;
				for (i = a.length - 1; i > 0; i--) {
					j = Math.floor(Math.random() * (i + 1));
					x = a[i];
					a[i] = a[j];
					a[j] = x;
				}
				return a;
			}


			// initialize data set
			for(var i = 0; i < TOTAL; ++i) {
				imgSet.push(new img(i + 1));
				currSet.push(new img(i +1));
			}
			currSet = shuffle(currSet);
			imgLeft.src = currSet[li].src();
			imgRight.src = currSet[ri].src();
			
			// END initialize.

			function end() {
				for(var i = 0; i < currSet.length; i++) {
					var tr = document.createElement("tr");
					var td1 = document.createElement("td");
					td1.innerText = currSet[i].src();
					var td2 = document.createElement("td");
					td2.innerText = currSet[i].rank;
					tr.appendChild(td1);
					tr.appendChild(td2);
					document.getElementById("table").appendChild(tr);
				}
			}
	
			function leftClick() {		
				if(li == currSet.length - 1 || ri == currSet.length - 1)	{
					end();
					return;
				}
				// choose a new ri
				if(ri < li) ri = li + 1;
				else ri++;													
				if(ri < currSet.length) {
					imgRight.src = currSet[ri].src();
					currSet[ri].selected = true;
					currSet[li].rank++;
				}								
				else {
					end();
				}
				
			}
			function rightClick(){
			
				if(li == currSet.length - 1 || ri == currSet.length - 1)	{
					end();
					return;
				}

				// choose a new li
				if(li < ri) li = ri + 1;
				else li++;

				if(li < currSet.length) {
					imgLeft.src = currSet[li].src();
					currSet[li].selected = true;
					currSet[ri].rank++;
				}
				else {
					end();
				}
				
			}
			
		</script>
	</body>
</html>